---
title: Nginx作为Node.js前端WebServer
date: 2017-07-05 19:32:13
tags: [Nginx,nodejs]
categories: Nginx
---
Ngnix拥有出色的HTTP反向代理能力,将他置于Node.js前端来处理我们的各种需求。
<!-- more -->
#### 1.静态文件处理能力
Node.js的静态文件处理能力受制于他的单线程异步I/O模型。使用Ngnix处理静态文件性能基本上是纯Node.js的2倍以上。
#### 2.反向代理规则
有时候存在反向代理服务器配置多样化的情况，有时候我们希望配置较好的机器能够分担更多的压力，有时又因为session的关系，我们需要将同一来源IP客户端全转发到同一进程上。使用Ngnix的配置文件可以简单实现。
#### 3.扩展性
Nginx可以加入许多扩展，帮助我们处理业务。最典型的就是加入Lua语言的扩展，通过胶水语言Lua，对Nginx赋予了复杂逻辑判断的能力，并且保持着一贯的高效。例如我们有一个api服务，对访问会进行md5签名或对同一客户端来源有访问频率限制，这部分代码是后端业务处理前必须通过的验证，具有卡口作用。利用Lua扩展，我们就可以高效、简单地完成这个卡口。
#### 4.稳定性和转发性能
Nginx的稳定性有目共睹，同样负载下，相比Node.js占用的CPU和内存资源更少，同时高效地转发新能，方便地转发配置都是我们选择它作为反向代理的原因之一，比如我们可以根据不同的url请求路径转发到不同的后端机器上，也可以设定超时时间等，方便管理。
#### 5.安全性
Nginx已经被各大互联网公司广泛应用，经过一些配置可以有效抵挡类似slowloris等的DoS攻击，而Node.js在这方面做的还不够。
#### 6.运维管理
可能我们目前限于资金的原因，只有一台web服务器，同时有多个站点需要占用80端口，这时我们只需要让Node.js服务监听本地的特殊端口，例如3000，通过Nginx的反向代理配置，就可以完成多个站点域名指向一台机器的需求了。

所以，一个好习惯就是，在生产环境中，永远把Nginx放置在Node.js的前端，对性能、安全性和将来的扩展性都有益处。